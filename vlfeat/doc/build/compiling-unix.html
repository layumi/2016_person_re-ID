<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
   <html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <!-- IE Standards Mode -->
  <meta content="IE=edge" http-equiv="X-UA-Compatible"></meta>

  <!-- Favicon -->
  <link href="images/vl_blue.ico" type="image/x-icon" rel="icon"></link>
  <link href="images/vl_blue.ico" type="image/x-icon" rel="shortcut icon"></link>

  <!-- Page title -->
  <title>VLFeat - Download > Compiling > Compiling on UNIX-like platforms</title>

  <!-- Stylesheets -->
  <link href="vlfeat.css" type="text/css" rel="stylesheet"></link>
  <link href="pygmentize.css" type="text/css" rel="stylesheet"></link>
  <style xml:space="preserve">
    /* fixes a conflict between Pygmentize and MathJax */
    .MathJax .mo, .MathJax .mi {color: inherit ! important}
  </style>
  

  <!-- Scripts-->
  

  <!-- MathJax -->
  <script xml:space="preserve" type="text/x-mathjax-config">
    MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ['\\(','\\)'] ],
      processEscapes: true,
    },
    TeX: {
      Macros: {
        balpha: '\\boldsymbol{\\alpha}',
        bc: '\\mathbf{c}',
        be: '\\mathbf{e}',
        bg: '\\mathbf{g}',
        bq: '\\mathbf{q}',
        bu: '\\mathbf{u}',
        bv: '\\mathbf{v}',
        bw: '\\mathbf{w}',
        bx: '\\mathbf{x}',
        by: '\\mathbf{y}',
        bz: '\\mathbf{z}',
        bsigma: '\\mathbf{\\sigma}',
        sign: '\\operatorname{sign}',
        diag: '\\operatorname{diag}',
        real: '\\mathbb{R}',
      },
      equationNumbers: { autoNumber: 'AMS' }
      }
    });
  </script>
  <script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" xml:space="preserve" type="text/javascript"></script>

  <!-- Google Custom Search -->
  <script xml:space="preserve">
    (function() {
    var cx = '003215582122030917471:oq23albfeam';
    var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
    gcse.src = (document.location.protocol == 'https' ? 'https:' : 'http:') +
    '//www.google.com/cse/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
    })();
  </script>

  <!-- Google Analytics -->
  <script xml:space="preserve" type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-4936091-2']);
    _gaq.push(['_trackPageview']);
    (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
 </head>

 <!-- Body Start -->
 <body>
  <div id="header-section">
    <div id="header">
      <!-- Google CSE Search Box -->
      <div class="searchbox">
        <gcse:searchbox-only autoCompleteMaxCompletions="5" autoCompleteMatchType="any" resultsUrl="http://www.vlfeat.org/search.html"></gcse:searchbox-only>
      </div>
      <h1 id="id-16"><a shape="rect" href="index.html" class="plain"><span id="vlfeat">VLFeat</span><span id="dotorg">.org</span></a></h1>
    </div>
    <div id="sidebar"> <!-- Navigation Start -->
      <ul>
<li><a href="index.html">Home</a>
<ul>
<li><a href="about.html">About</a>
</li>
<li><a href="license.html">License</a>
</li>
</ul></li>
<li class='active'><a href="download.html">Download</a>
<ul>
<li><a href="install-matlab.html">Using from MATLAB</a>
</li>
<li><a href="install-octave.html">Using from Octave</a>
</li>
<li><a href="install-shell.html">Using from the command line</a>
</li>
<li><a href="install-c.html">Using from C</a>
<ul>
<li><a href="xcode.html">Xcode</a>
</li>
<li><a href="vsexpress.html">Visual C++</a>
</li>
<li><a href="gcc.html">g++</a>
</li>
</ul></li>
<li class='active'><a href="compiling.html">Compiling</a>
<ul>
<li class='active' class='activeLeaf'><a href="compiling-unix.html">Compiling on UNIX-like platforms</a>
</li>
<li><a href="compiling-windows.html">Compiling on Windows</a>
</li>
</ul></li>
</ul></li>
<li><a href="overview/tut.html">Tutorials</a>
<ul>
<li><a href="overview/frame.html">Local feature frames</a>
</li>
<li><a href="overview/covdet.html">Covariant feature detectors</a>
</li>
<li><a href="overview/hog.html">HOG features</a>
</li>
<li><a href="overview/sift.html">SIFT detector and descriptor</a>
</li>
<li><a href="overview/dsift.html">Dense SIFT</a>
</li>
<li><a href="overview/liop.html">LIOP local descriptor</a>
</li>
<li><a href="overview/mser.html">MSER feature detector</a>
</li>
<li><a href="overview/imdisttf.html">Distance transform</a>
</li>
<li><a href="overview/encodings.html">Fisher Vector and VLAD</a>
</li>
<li><a href="overview/gmm.html">Gaussian Mixture Models</a>
</li>
<li><a href="overview/kmeans.html">K-means clustering</a>
</li>
<li><a href="overview/aib.html">Agglomerative Infromation Bottleneck</a>
</li>
<li><a href="overview/quickshift.html">Quick shift superpixels</a>
</li>
<li><a href="overview/slic.html">SLIC superpixels</a>
</li>
<li><a href="overview/svm.html#tut.svm">Support Vector Machines (SVMs)</a>
</li>
<li><a href="overview/kdtree.html">KD-trees and forests</a>
</li>
<li><a href="overview/plots-rank.html">Plotting AP and ROC curves</a>
</li>
<li><a href="overview/utils.html">Miscellaneous utilities</a>
</li>
<li><a href="overview/ikm.html">Integer K-means</a>
</li>
<li><a href="overview/hikm.html">Hierarchical integer k-means</a>
</li>
</ul></li>
<li><a href="applications/apps.html">Applications</a>
</li>
<li><a href="doc.html">Documentation</a>
<ul>
<li><a href="matlab/matlab.html">MATLAB API</a>
</li>
<li><a href="api/index.html">C API</a>
</li>
<li><a href="man/man.html">Man pages</a>
</li>
</ul></li>
</ul>

    </div> <!-- sidebar -->
  </div>
  <div id="headbanner-section">
    <div id="headbanner">
      <span class='page'><a href="download.html">Download</a></span><span class='separator'>></span><span class='page'><a href="compiling.html">Compiling</a></span><span class='separator'>></span><span class='page'><a href="compiling-unix.html">Compiling on UNIX-like platforms</a></span>
    </div>
  </div>
  <div id="content-section">
    <div id="content-wrapper">
      <div id="content">
        

<div class='toc'>
<h3>Table of Contents</h3><ul><li class="level1"><a href="#id-498">General instructions</a></li>
</ul>
<ul><ul><li class="level2"><a href="#id-509">Compiling MATLAB support</a></li>
</ul>
</ul>
<ul><ul><li class="level2"><a href="#id-522">Compiling Octave support</a></li>
</ul>
</ul>
<ul><li class="level1"><a href="#id-526">Mac OS X troubleshooting</a></li>
</ul>
<ul><ul><li class="level2"><a href="#id-527">OS X 10.9 Mavericks, Xcode 5, clang, and GCC</a></li>
</ul>
</ul>
<ul><ul><li class="level2"><a href="#id-534">OS X 10.6 Snow Leopard, 64-bit, and MATLAB 2009b.</a></li>
</ul>
</ul>
</div><!-- Table of contents -->


<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
<h1 id="id-498">General instructions</h1>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<p>Compiling for UNIX-like platforms (e.g. GNU/Linux, Mac OS X)
assumes that the standard GNU toolchain is available. In particular,
while compilers other than GCC can be used, the compilation scripts
require GNU/make.</p>

<p>To compile the library, it is usually sufficient to change to
VLFeat root directory, denoted <code/>VLFEATROOT</code> in the
following, and type <code/>make</code>:</p>

<div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd </span>VLFEATROOT
<span class="nv">$ </span>make
</pre></div>


<p>The make script attempts to automatically detect the host
architecture and configure itself accordingly. If the architecture is
not detected correctly, it can be specified manually. For instance</p>

<div class="highlight"><pre><span class="nv">$ </span>make <span class="nv">ARCH</span><span class="o">=</span>glnx86
</pre></div>


<p>compiles for GNU/Linux 32-bit. <code/>make help</code> can be used
to obtain a list of other useful options. You can also use <code/>make
info</code> to obtain a list of the configuration parameters used by
the Makefile, which might allow you do debug any potential issue.</p>

<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
<h2 id="id-509">Compiling MATLAB support</h2>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<p>In order for MATLAB support to be compiled, the
MATLAB <code/>mex</code> script must be in the current path. If it is
not, its location must be passed to <code/>make</code> as
follows. First, determine MATLAB's root directory by running a MATLAB
session and issuing the <code/>matlabroot</code>
command. Let <code/>MATLABROOT</code> denote the returned path
(e.g. <code/>/Applications/MATLAB_R2009b.app/</code>). The <code/>mex</code>
script is usually located in <code/>MALTABROOT/bin/mex</code>. Then run
the compilation with the command</p>

<div class="highlight"><pre><span class="nv">$ </span>make <span class="nv">MEX</span><span class="o">=</span>MATLABROOT/bin/mex
</pre></div>


<p>VLFeat must be compiled for the architecture used by MATLAB (run
MATLAB's <code/>computer</code> command to obtain this information). On
Mac OS X it is often necessary to turn on 64-bit support explicitly by
setting <code/>ARCH=maci64</code> as both the 32 and 64 bit versions
are plausible targets on 64-bit machines.</p>

<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
<h2 id="id-522">Compiling Octave support</h2>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<p>Octave support is still experimental. Similarly to MATLAB, Octave
requires compiling MEX files. This can be turned on by passing to make
the path to the <code/>mkoctfile</code> command:</p>

<div class="highlight"><pre><span class="nv">$ </span>make <span class="nv">MKOCTFILE</span><span class="o">=</span>/path/to/mkoctfile
</pre></div>


<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
<h1 id="id-526">Mac OS X troubleshooting</h1>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
<h2 id="id-527">OS X 10.9 Mavericks, Xcode 5, clang, and GCC</h2>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<p>Recent changes to Mac OS X toolkit that ships with Xcode have made
compilation of VLFeat slightly more complex. Out of the box, Xcode 5.0
on Mac OS X Mavericks, for example, incorporates the clang compiler
but not the GCC compiler. While VLFeat has been updated to use clang
in this case, it is worth noting that this compiler does not yet
support the OpenMP standard, meaning that multi-core computations
would be disabled in this case.</p>

<p>Compiling OpenMP can be achieved by using the GCC compiler, for
example obtaining it from MacPorts. However, anything more recent that
GCC 4.2 will use the MacPorts runtime (C and C++). Since MATLAB links
to the OS X native C and C++ runtime, this breaks the compatibility of
VLFeat MEX files with MATLAB. In particular, while VLFeat does not use
C++, MEX files do as the MEX API is coded in C++ internally (in
particular MEX files are coded with the <code/>-fexception</code>
option as MEX API calls can throw exceptions, even though they look
like regular C functions). In short, mixing C++ runtimes will cause
MATLAB MEX files to crash every time an error is generated.</p>

<p>The easiest solution at present is to use
the <code/>gcc-apple-4.2</code> from MacPorts. Unfortunately, this
version does not support AVX instructions, but supports OpenMP and
creates binaries that are MATLAB compatible.</p>

<div class="highlight"><pre><span class="c"># Compile VLFeat in a manner compatible with MATLAB and OpenMP support</span>
<span class="nv">$ </span>sudo port install apple-gcc42 <span class="c"># Install MacPort&#39;s distribution of apple-gcc-42</span>
<span class="nv">$ </span>make <span class="nv">CC</span><span class="o">=</span>/opt/local/bin/gcc-apple-42 <span class="c"># compile VLFeat using MacPort&#39;s GCC</span>
</pre></div>


<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
<h2 id="id-534">OS X 10.6 Snow Leopard, 64-bit, and MATLAB 2009b.</h2>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->

<p>MATLAB 2009b for Snow Leopard has added 64 bit mex support and a
corresponding extension <code/>mexmaci64</code>. VLFeat now supports
compiling for this platform, but the architecture must be specified
manually when compiling, either like:</p>

<div class="highlight"><pre><span class="nv">$ </span>make <span class="nv">ARCH</span><span class="o">=</span>maci64
</pre></div>


<p>or</p>

<div class="highlight"><pre><span class="nv">$ </span>make <span class="nv">ARCH</span><span class="o">=</span>maci
</pre></div>


<p>Unfortunately, MATLAB 2009b's <code/>mex</code> script has a bug
that must be manually fixed in order for this procedure to work
correctly. It is recommend to make backup of the <code/>mex</code>
script before attempting this. Th fix the bug, edit the
<code/>MATLABROOT/bin/mex</code> script by cutting the line:</p>

<div class="highlight"><pre>get_arch    <span class="c"># Call $MATLAB/bin/util/arch.sh</span>
</pre></div>


<p>and pasting it after the processing of options:</p>

<div class="highlight"><pre>...
<span class="nb">shift</span>
<span class="k">done</span>

<span class="c">#PASTE get_arch call here</span>
get_arch    <span class="c"># Call $MATLAB/bin/util/arch.sh</span>

<span class="k">if</span> <span class="o">[</span> <span class="nv">$v7_compat</span> -eq <span class="m">1</span> <span class="o">]</span> <span class="p">;</span> <span class="k">then</span>
<span class="nv">fc_flags</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$fc_flags</span><span class="s2"> -DMX_COMPAT_32&quot;</span>
...
</pre></div>


      </div>
      <div class="clear">&nbsp;</div>
    </div>
  </div> <!-- content-section -->
  <div id="footer-section">
    <div id="footer">
      &copy; 2007-13 The authors of VLFeat
    </div> <!-- footer -->
  </div> <!-- footer section -->
 </body>
 <!-- Body ends -->
</html>
 